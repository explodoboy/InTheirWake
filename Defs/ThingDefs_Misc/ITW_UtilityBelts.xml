<Defs>
    
    <ThingDef ParentName="ApparelBase" Name="ITW_ShieldBeltBase" Abstract="True">
        <tickerType>Normal</tickerType>
        <thingClass>Apparel</thingClass>
        <techLevel>Archotech</techLevel>
        <statBases>
            <MaxHitPoints>150</MaxHitPoints>
            <Mass>3</Mass>
            <WorkToMake>14000</WorkToMake>
            <Flammability>0</Flammability>
        </statBases>
        <comps>
            <li Class="CompProperties_Shield">
                <compClass>Armorshield.CompShieldRanged</compClass>
            </li>
        </comps>
        <thingCategories>
            <li>ApparelUtility</li>
        </thingCategories>
        <apparel>
            <wornGraphicData>
                <renderUtilityAsPack>true</renderUtilityAsPack>
                <east>
                    <offset>(-0.35,-0.05)</offset>
                    <thin><offset>(0.05,0)</offset></thin>
                    <hulk><offset>(-0.1,0)</offset></hulk>
                    <fat><offset>(-0.15,0)</offset></fat>
                </east>
                <west>
                    <offset>(0.35,-0.05)</offset>
                    <thin><offset>(-0.05,0)</offset></thin>
                    <hulk><offset>(0.1,0)</offset></hulk>
                    <fat><offset>(0.15,0)</offset></fat>
                </west>
                <male>  <scale>(0.9,0.75)</scale></male>
                <female><scale>(0.9,0.75)</scale></female>
                <thin>  <scale>(0.7,0.7)</scale></thin>
                <hulk>  <scale>(1.1,0.9)</scale></hulk>
                <fat>   <scale>(1.2,0.9)</scale></fat>
            </wornGraphicData>
            <scoreOffset>4</scoreOffset>
            <countsAsClothingForNudity>false</countsAsClothingForNudity>
            <careIfWornByCorpse>false</careIfWornByCorpse>
            <careIfDamaged>false</careIfDamaged>
            <wearPerDay>0</wearPerDay>
            <bodyPartGroups>
                <li>Waist</li>
            </bodyPartGroups>
            <layers>
                <li>Belt</li>
            </layers>
            <tags>
                <li>BeltDefense</li>
            </tags>
            <developmentalStageFilter>Child, Adult</developmentalStageFilter>
        </apparel>
        <allowedArchonexusCount>10</allowedArchonexusCount>
    </ThingDef>

    <ThingDef ParentName="ITW_ShieldBeltBase">
        <defName>ITW_UtilityBelt</defName>
        <label>phitech utility pack</label>
        <description>A multi-purpose phitech pack containing a personal ranged shield, deployable shieldpack, mobility thrusters. The personal shield protects against incoming projectiles and shrapnel, but does not protect against melee attacks or heat and shuts down instantly if hit by an EMP. The shieldpack is immobile after placed and very short-lived but blocks both ground and air projectiles, such as bullets and artillery.\n\nIf Royalty is enabled, the utility pack gains the functionality of a jump pack with no fuel requirement; otherwise, it's a ranged shield belt.</description>
        <graphicData>
            <texPath>BaseITW/Things/Pawn/Humanlike/Apparel/ITW_UtilityBelt/ITW_UtilityBelt</texPath>
            <graphicClass>Graphic_Single</graphicClass>
        </graphicData>
        <apparel>
            <wornGraphicPath>BaseITW/Things/Pawn/Humanlike/Apparel/ITW_UtilityBelt/ITW_UtilityBelt</wornGraphicPath>
        </apparel>
        <statBases>
            <EnergyShieldRechargeRate>0.2</EnergyShieldRechargeRate>
            <EnergyShieldEnergyMax>1.65</EnergyShieldEnergyMax>
            <EquipDelay>1</EquipDelay>
            <JumpRange MayRequire="Ludeon.RimWorld.Royalty">29.9</JumpRange>
        </statBases>
        <verbs>
            <li MayRequire="Ludeon.RimWorld.Royalty">
                <verbClass>Verb_Jump</verbClass>
                <label>jump</label>
                <violent>false</violent>
                <hasStandardCommand>true</hasStandardCommand>
                <onlyManualCast>True</onlyManualCast>
                <forceNormalTimeSpeed>false</forceNormalTimeSpeed>
                <warmupTime>0.5</warmupTime>
                <warmupEffecter>JumpWarmupEffect</warmupEffecter>
                <requireLineOfSight>true</requireLineOfSight>
                <flightEffecterDef>JumpFlightEffect</flightEffecterDef>
                <soundLanding>JumpPackLand</soundLanding>
                <targetParams>
                    <canTargetLocations>true</canTargetLocations>
                    <canTargetPawns>false</canTargetPawns>
                    <canTargetBuildings>false</canTargetBuildings>
                </targetParams>
            </li>
            <li>
                <verbClass>Verb_Spawn</verbClass>
                <label>flicker fullshield</label>
                <spawnDef>ITW_FlickerShield</spawnDef>
                <commandIcon>BaseITW/Things/Building/Security/ITW_FlickerShield</commandIcon>
                <violent>false</violent>
                <hasStandardCommand>true</hasStandardCommand>
                <targetable>false</targetable>
                <nonInterruptingSelfCast>true</nonInterruptingSelfCast>
                <onlyManualCast>True</onlyManualCast>
                <warmupTime>0.1</warmupTime>
                <warmupEffecter>BulletShieldGenerator_Reactivate</warmupEffecter> <!-- hack to get an effect on shield placement -->
                <targetParams>
                    <canTargetSelf>true</canTargetSelf>
                </targetParams>
            </li>
        </verbs>
        <comps>
            <li Class="MVCF.Comps.CompProperties_VerbGiver">
                <verbProps>
                    <li MayRequire="Ludeon.RimWorld.Royalty">
                        <label>jump</label>
                        <description>Leap a long distance, flying straight over passable obstacles. Has a short cooldown.</description>
                        <comps>
                            <li Class="MVCF.VerbComps.VerbCompProperties_Cooldown">
                                <compClass>MVCF.VerbComps.VerbComp_Cooldown</compClass>
                                <cooldownTime>10</cooldownTime> <!-- time is in seconds -->
                            </li>
                        </comps>
                    </li>
                    <li>
                        <label>flicker fullshield</label>
                        <description>Release a short-lived fullshield on the ground. Cooldown of one and hour.</description>
                        <comps>
                            <li Class="MVCF.VerbComps.VerbCompProperties_Cooldown">
                                <compClass>MVCF.VerbComps.VerbComp_Cooldown</compClass>
                                <cooldownTime>41.67</cooldownTime> <!-- time is in seconds -->
                            </li>
                        </comps>
                    </li>
                </verbProps>
            </li>
        </comps>
        <costList>
            <ITW_MaterialCommon>75</ITW_MaterialCommon>
            <ITW_Component>5</ITW_Component>
        </costList>
        <recipeMaker>
            <unfinishedThingDef>UnfinishedBelt</unfinishedThingDef>
            <researchPrerequisite>ITW_Armor</researchPrerequisite>
            <workSpeedStat>GeneralLaborSpeed</workSpeedStat>
            <workSkill>Crafting</workSkill>
            <effectWorking>Smith</effectWorking>
            <soundWorking>Recipe_Machining</soundWorking>
            <recipeUsers>
                <li>ITW_CraftingMain</li>
            </recipeUsers>
            <useIngredientsForColor>false</useIngredientsForColor>
            <skillRequirements>
                <Crafting>10</Crafting>
            </skillRequirements>
        </recipeMaker>
        <thingSetMakerTags>
            <li>RewardStandardQualitySuper</li>
        </thingSetMakerTags>
        <tradeTags>
            <li>Armor</li>
            <li>PhitechArmor</li>
        </tradeTags>
    </ThingDef>

    <!-- things spawned by the utility belt -->
    <ThingDef ParentName="BuildingBase">
        <defName>ITW_FlickerShield</defName>
        <label>flicker fullshield</label>
        <description>A human-made phitech shield projector. It intercepts both ground projectiles and artillery while allowing bullets and artillery to go out. Its internal capacitors will run out of charge after a few seconds of use. While its lifetime is short, it is highly resistant to EMPs and will only go offline briefly.</description>
        <altitudeLayer>BuildingOnTop</altitudeLayer>
        <drawerType>MapMeshAndRealTime</drawerType>
        <pathCost>0</pathCost>
        <passability>Standable</passability>
        <fillPercent>0.35</fillPercent>
        <graphicData>
            <texPath>BaseITW/Things/Building/Security/ITW_FlickerShield</texPath>
            <graphicClass>Graphic_Single</graphicClass>
            <drawSize>(3,3)</drawSize>
            <shadowData>
                <volume>(0.3, 0.2, 0.3)</volume>
                <offset>(0,0,-0.1)</offset>
            </shadowData>
            <damageData>
                <rect>(0.2,0.2,0.6,0.6)</rect>
            </damageData>
        </graphicData>
        <statBases>
            <MaxHitPoints>150</MaxHitPoints>
            <Flammability>0.5</Flammability>
        </statBases>
        <tickerType>Normal</tickerType>
        <killedLeavings/>
        <rotatable>false</rotatable>
        <selectable>true</selectable>
        <terrainAffordanceNeeded>Light</terrainAffordanceNeeded>
        <soundImpactDefault>BulletImpact_Metal</soundImpactDefault>
        <repairEffect>ConstructMetal</repairEffect>
        <resourcesFractionWhenDeconstructed>0</resourcesFractionWhenDeconstructed>
        <building>
            <claimable>false</claimable>
            <destroySound>BuildingDestroyed_Metal_Small</destroySound>
            <ai_chillDestination>false</ai_chillDestination>
            <isEdifice>false</isEdifice>
            <destroyEffecter>Shield_Break</destroyEffecter>
        </building>
        <comps>
        <li Class="CompProperties_ProjectileInterceptor">
            <radius>2.9</radius>
            <interceptGroundProjectiles>true</interceptGroundProjectiles>
            <interceptAirProjectiles>true</interceptAirProjectiles>
            <interceptNonHostileProjectiles>true</interceptNonHostileProjectiles>
            <interceptOutgoingProjectiles>false</interceptOutgoingProjectiles>
            <color>(0.8, 0.8, 0.2)</color>
            <idlePulseSpeed>3</idlePulseSpeed>
            <minIdleAlpha>0.05</minIdleAlpha>
            <disarmedByEmpForTicks>60</disarmedByEmpForTicks>
            <activeSound>BulletShield_Ambience</activeSound>
        </li>
        <li Class="CompProperties_DestroyAfterDelay">
            <delayTicks>600</delayTicks>
            <destroyMode>KillFinalize</destroyMode>
            <countdownLabel>Power loss in</countdownLabel>
        </li>
        </comps>
    </ThingDef>

</Defs>